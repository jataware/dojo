"use strict";(self.webpackChunkdojo_docs_v_2=self.webpackChunkdojo_docs_v_2||[]).push([[945],{4585:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var n=o(5893),r=o(1151),i=o(4285);const a={layout:"default",title:"Jupyter Notebooks",parent:"Model Registration"},l="Registering Jupyter Notebook Models in Dojo",s={id:"model-registration/jupyter",title:"Jupyter Notebooks",description:"To register a Jupyter notebook based model in Dojo we recommend installing Papermill to run the model. Papermill allows the ability to run a notebook as an executable as well as tag and expose parameters, which might be needed depending on how model parameters are defined.",source:"@site/docs/model-registration/jupyter.mdx",sourceDirName:"model-registration",slug:"/model-registration/jupyter",permalink:"/dojo/model-registration/jupyter",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{layout:"default",title:"Jupyter Notebooks",parent:"Model Registration"},sidebar:"dojoSidebar",previous:{title:"Excel Models",permalink:"/dojo/model-registration/excel"},next:{title:"MATLAB Models",permalink:"/dojo/model-registration/matlab"}},d={},p=[{value:"Preparing your Notebook",id:"preparing-your-notebook",level:2},{value:"Papermill In Dojo",id:"papermill-in-dojo",level:2}];function h(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"registering-jupyter-notebook-models-in-dojo",children:"Registering Jupyter Notebook Models in Dojo"}),"\n",(0,n.jsxs)(t.p,{children:["To register a Jupyter notebook based model in Dojo we recommend installing ",(0,n.jsx)(t.a,{href:"https://papermill.readthedocs.io/en/latest/index.html",children:"Papermill"})," to run the model. Papermill allows the ability to run a notebook as an executable as well as tag and expose parameters, which might be needed depending on how model parameters are defined."]}),"\n",(0,n.jsx)(t.p,{children:"If the parameters of the model are set in the notebook and modified manually for each run then you will need to expose those parameters by tagging a cell in the notebook. See next section."}),"\n",(0,n.jsxs)(t.p,{children:["If the notebook reads in parameters from another file there is no need to tag anything in the notebook. Instead you will define those parameters using Dojo\u2019s ",(0,n.jsx)(t.a,{href:"./cheatsheet#dojo-terminal-commands",children:'Built-in "dojo" command'})," (specifically dojo config \u2026) to tag the parameters. Dojo will handle updating that file before the notebook runs allowing that parameter to be exposed."]}),"\n",(0,n.jsx)(t.h2,{id:"preparing-your-notebook",children:"Preparing your Notebook"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["Note: this process is slightly different for Jupyter Notebooks, JupyterLab 2.0-2.2.x, and JupyterLab V3 and up. Follow the directions created by Papermill ",(0,n.jsx)(t.a,{href:"https://papermill.readthedocs.io/en/latest/usage-parameterize.html",children:"here -(adding parameters)"})," for whatever case you have."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"There are three simple steps to tag parameters that are defined in the notebook:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"First move all the parameters to one cell at the top of your notebook."}),"\n",(0,n.jsx)(t.li,{children:"Set their values to default values for a default run."}),"\n",(0,n.jsx)(t.li,{children:"Tag the cell as \u201cparameters\u201d in whatever method Papermill recommends."}),"\n"]}),"\n","\n","\n",(0,n.jsx)(i.Z,{file:"parameters.png",width:"750px",title:"Parameter Tag in Jupyter Notebook"}),"\n",(0,n.jsx)(t.h2,{id:"papermill-in-dojo",children:"Papermill In Dojo"}),"\n",(0,n.jsx)(t.p,{children:"Now that you have tagged your parameters cell lets run and register the model in Dojo. Like any model you will fill out model information and select your base image from the drop down menu."}),"\n",(0,n.jsxs)(t.p,{children:["Papermill is pre-installed in Dojo's ",(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.code,{children:"Ubuntu Analytics"})})," base image. You should choose this as your base image for your containerization environment. Otherwise, you'll need to follow ",(0,n.jsx)(t.a,{href:"https://papermill.readthedocs.io/en/latest/installation.html",children:"Papermill's installation instructions"})," yourself."]}),"\n",(0,n.jsxs)(t.p,{children:["If your notebook is called ",(0,n.jsx)(t.code,{children:"test.pynb"})," you'd use something like the following command:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"  papermill test.ipynb -p temp .5 -\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This will run ",(0,n.jsx)(t.code,{children:"test.ipynb"}),". The -p is a flag that allows you to pass in a value for the parameter you set in your tagged cell. In dojo you would mark this as your Directive and select .5 as the value for a parameter."]}),"\n",(0,n.jsx)(t.p,{children:"After editing the directive and setting the parameter .5 to \u201ctemperature\u201d it looked like this:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"papermill test.ipynb -p temp {{temperature}} -\n"})}),"\n",(0,n.jsx)(t.p,{children:"Now you can save and publish the model and it should work with dojo with exposed parameters."})]})}function c(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},4285:(e,t,o)=>{o.d(t,{Z:()=>i});o(7294);var n=o(4996),r=o(5893);function i(e){let{width:t,file:o,title:i}=e;return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("img",{src:(0,n.Z)(`/img/${o}`),width:t,alt:i}),(0,r.jsx)("p",{children:(0,r.jsx)("i",{children:i})})]})}},1151:(e,t,o)=>{o.d(t,{Z:()=>l,a:()=>a});var n=o(7294);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);